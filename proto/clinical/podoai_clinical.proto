syntax = "proto3";

package podoai_clinical;
option go_package = "github.com/therehabstreet/podoai/proto/clinical";

import "common/podoai.proto";
import "google/protobuf/timestamp.proto";

// Clinical service definitions go here
service ClinicalService {
    rpc GetPatients (GetPatientsRequest) returns (GetPatientsResponse);
    rpc GetPatient (GetPatientRequest) returns (GetPatientResponse);
    rpc SearchPatient (SearchPatientRequest) returns (SearchPatientResponse);
    rpc CreatePatient (CreatePatientRequest) returns (CreatePatientResponse);
    rpc DeletePatient (DeletePatientRequest) returns (DeletePatientResponse);

    // Clinic APIs
    rpc GetClinic (GetClinicRequest) returns (GetClinicResponse);

    // ClinicUser CRUDL APIs
    rpc CreateClinicUser (CreateClinicUserRequest) returns (CreateClinicUserResponse);
    rpc GetClinicUser (GetClinicUserRequest) returns (GetClinicUserResponse);
    rpc UpdateClinicUser (UpdateClinicUserRequest) returns (UpdateClinicUserResponse);
    rpc DeleteClinicUser (DeleteClinicUserRequest) returns (DeleteClinicUserResponse);
    rpc ListClinicUsers (ListClinicUsersRequest) returns (ListClinicUsersResponse);
}

message Clinic {
    string id = 1;
    string name = 2;
    string address = 3;
}

message ClinicUser {
    string id = 1;
    string name = 2;
    repeated podoai.Role roles = 3;
    string clinic_id = 4;
    google.protobuf.Timestamp created_at = 5;
    google.protobuf.Timestamp updated_at = 6;
}

message GetPatientsRequest {
    int32 page = 1;
    int32 page_size = 2;
    string sort_by = 3;
    string sort_order = 4; // "asc" or "desc"
}

message GetPatientsResponse {
    repeated podoai.Patient patients = 1;
    int32 total_count = 2;
}

message GetPatientRequest {
    string patient_id = 1;
}

message GetPatientResponse {
    podoai.Patient patient = 1;
}

message SearchPatientRequest {
    string search_term = 1;
    int32 page = 2;
    int32 page_size = 3;
}

message SearchPatientResponse {
    repeated podoai.Patient patients = 1;
    int32 total_count = 2;
}

message CreatePatientRequest {
    podoai.Patient patient = 1;
}

message CreatePatientResponse {
    podoai.Patient patient = 1;
}

message DeletePatientRequest {
    string patient_id = 1;
}

message DeletePatientResponse {
    bool success = 1;
}

// Clinic API messages
message GetClinicRequest {
    string clinic_id = 1;
}

message GetClinicResponse {
    Clinic clinic = 1;
}

// ClinicUser CRUDL messages
message CreateClinicUserRequest {
    ClinicUser user = 1;
}

message CreateClinicUserResponse {
    ClinicUser user = 1;
}

message GetClinicUserRequest {
    string user_id = 1;
}

message GetClinicUserResponse {
    ClinicUser user = 1;
}

message UpdateClinicUserRequest {
    ClinicUser user = 1;
}

message UpdateClinicUserResponse {
    ClinicUser user = 1;
}

message DeleteClinicUserRequest {
    string user_id = 1;
}

message DeleteClinicUserResponse {
    bool success = 1;
}

message ListClinicUsersRequest {
    string clinic_id = 1;
    int32 page = 2;
    int32 page_size = 3;
}

message ListClinicUsersResponse {
    repeated ClinicUser users = 1;
    int32 total_count = 2;
}

